# CHANGLOG



## v2.3.0
* 将battery law 合并入soh功能, 并通过宏使能控制
* 单次充放电量在静置时保持
* soh计算回滚为一条曲线,



--------------------------------------------------------------------------------

## v2.2.3
* soh改为两条衰减曲线(按循环次数衰减)

## v2.2.2
* 将循环次数提取为宏

## v2.2.1
* 增加 -Wstrict-prototypes 检查

## v2.2.0
1. 增加极光35度测试数据
2. 增加int16 冒泡排序
3. 增加小电流充放电soc功能(纯安时)
4. 优化组端soc计算函数写法,删除无用变量,增加虚假soc平滑控制宏
5. 增加soh被动校准
1. 增加项目测试数据: 极光第一二次25度充电数据
2. debug.c 修改自定义printf输出样式, 增加文件,行信息
3. port.c port.h 增加获取cpu 时基接口
3. soc.c 移除不用注释, printf改为自定义日志接口,通过宏控制使能
4. sox_private.h sox.c sox.h 增加调试接口:获取任务单次运行时间, 任务调用时机(分析两 次调用间隔)
5. soc.py 增加组端soc子图曲线交互式显示控制,增加误差曲线
6. test.c 增加测量代码运行时间
7. port_linux.c实现get_cpu_tick()接口



## v2.1.8
1. 统一发布版本号

------------------------------------------------------------





## v2.1.5
1. 修复moff整数部分参数(不能为NULL)

------------------------------------------------------------





## v2.1.5
1. 增加55度数据
2. 增加-Wconversion警告选项, 修复相关告警

-----------------------------------------------------------






## v2.1.4
1. 优化满充满放曲线的处理脚本, 增加网格, 便于对比 
2. 增加极光挂机测试跳变数据 
3. 优化getEKF_R函数局部变量命名, 优化clang-tidy整数除法告警 
4. 删除soh.c内无用的打印追踪 5. 增加linux 仿真环境选择项目的宏 
6. 结果可视化脚本(soc.py), 自动识别节数 
7. linux仿真测试程序修改写时的节数,改为CELLNUMS宏,增加与项目相关的温度印射输入函数,并通过宏选择




-----------------





## v2.1.2


1. 更改输入输出接口
2. 增加批量测试脚本
3. 嵌套式makefile, 源码独立编译为库
4. 修复组端soc拟合卡尔曼滤波, 观测燥声协方差矩阵R的非对角元素为0
5. 更改组端soc未端加速追赶阈值:小于10, 大于95
6. 修复readme中的公式写法错误
7. 测试改为clang编译, 增加-Wall -Wextra 选项
8. 修复getcap函数可能发生的未初始化变量错误
9. 增加堆叠项目移植文件


-----------------






## v0.0.0.33
### 新增
无
### 修改
1. 增加组端soc大于97时的平滑度
2. 增加中间段soc平滑与电流相关
### 删除
1. 注释printf
### 适用范围
所有
### 紧急程度
重要


## v0.0.0.32
### 新增
无
### 修改
1. 修复不必要的写eeprom
2. 保存的soc改为最终显示结果的soc
3. 修复强制校准时可能的错误
### 删除
1. 注释printf
### 适用范围
所有
### 紧急程度
重要



## V0.0.0.31
### 新增
* 增加上电ocv校准宏开关
* 增加ekf的Q参数的系数k的宏
* 增加初始化soc值(仅在满充满放时可用)参数, 增加使用标准soc画图使能参数, 增加估计soc与标准soc的对比图像
* 增加上电soc初始化ocv校准使能控制宏
* 增加初始化时强制清零系统状态检测相关变量, smooth soc 相关变量, 防止唤醒时重初始化时, ram里还有值
* 新增初始soc值参数
* 增加张磊第一轮测试数据文件
* 增加工厂自测数据文件
* 增加vscode文件追踪
* 增加调试时, 可输入初始soc参数
### 修改
* 电流窗口改为4A
* 调整ekf的R参数, 分段值分别为15 20-40 50
* 修改ekf的参数Q的计算方法(单步偏差累计)
* 静置10分钟清零smooth soc相关变量
* 修改smooth开始平滑时机, 改为soc低于30时
* 修复smooth soc失效的问题
* 增加smooth soc强度
* 修改ekf参数R的计算方法,改为三段区间,
* 修改ekf观测值校准策略, 改为尽可能校准
* 修改组端kf的参数Q, 减小Q, 增加组端soc平滑, 改为三段区间计算
* 修复组端soc在50%时, R值跳变带来的巨大波动
* 修复组端soc反向抖动
* 修复组端soc在smooth切换时的跳变
* 满充满放时, 把所有单体都强制视为满充或满放, 并清空smooth soc相关变量
* 初始soc由宏改为可输入参数, 优化初始化节数随宏定义改变
* 修改5度时放电容量(统一增加3AH)
### 删除
* 删除不用的数据文件
### 适用范围
所有
### 紧急程度
轻松



## V0.0.0.30
### 新增
无
### 修改
* 修复组端soc平滑处理
### 删除
无
### 适用范围
所有
### 紧急程度
轻松


## V0.0.0.29
### 新增
无
### 修改
* 优化组端soc平滑处理
### 删除
无
### 适用范围
所有
### 紧急程度
轻松

## V0.0.0.26
### 新增
无
### 修改
* 修复电压查表soc初始校准可能会得到负值
* 修复在sox init之前 电芯电压数组没值(linux port)
* 在linux上仿真时,给单体soc赋初值
* 给测试数据分类
### 删除
无
### 适用范围
所有
### 紧急程度
轻松

## V0.0.0.25
### 新增
无
### 修改
* 修复某些情况下查找曲线会卡死
### 删除
无
### 适用范围
所有
### 紧急程度
轻松

## V0.0.0.20
### 新增
无
### 修改
* 降低平台期电压校准效果,使组端soc精度总体在5%以内
* 增加linux上纯安时组端soc比较(只在满充满放时可用)
* 修复低温时校准方式
### 删除
无
### 适用范围
所有
### 紧急程度
轻松

## V0.0.0.19
### 新增
无
### 修改
静置时保持组端soc
### 删除
无
### 适用范围
所有
### 紧急程度
轻松


## V0.0.0.18
### 新增
* 组端soc kf, 修改最大最小soc的R值计算
### 修改
无
### 删除
无
### 适用范围
所有
### 紧急程度
轻松


## V0.0.0.17
### 新增
* 组端soc kf 使用最大最小值进行融合计算
### 修改
无
### 删除
无
### 适用范围
所有
### 紧急程度
轻松



## V0.0.0.16
### 新增
* 静置时存储一次soc
### 修改
* 修复累计充放电量计算
* 修复单次充放电量计算
* 修复循环次数计算
### 删除
无
### 适用范围
所有
### 紧急程度
轻松



## V0.0.0.15
### 新增
* 标准曲线切换时降低电压校准效果
* 组端soc最小1 最大99, 放空时0 充满时100
### 修改
* 修复ekf_R计算方式
* linux port 修改为使用温度插值
### 删除
无
### 适用范围
所有
### 紧急程度
轻松





## V0.0.0.14
### 新增
* 组端soc强制平滑
### 修改
* 修复充放电状态判断
### 删除
无
### 适用范围
所有
### 紧急程度
轻松




## V0.0.0.13
### 新增
无
### 修改
* 修复充放电状态判断
* 修复组端soc显示
### 删除
无
### 适用范围
所有
### 紧急程度
轻松



## V0.0.0.12
### 新增
无
### 修改
* 修复编译错误
### 删除
无
### 适用范围
所有
### 紧急程度
轻松



## V0.0.0.11
### 新增
无
### 修改
* 适配单片机编译
### 删除
无
### 适用范围
所有
### 紧急程度
轻松




## V0.0.0.10
### 新增
* ocv初始校准
* 强制设置soc soh soe接口
### 修改
* 优化底层移植接口
* 替换25度 0.5c充电曲线
* 修改25度 0.4c 充电容量
* 纯安时锁定条件(改为小于0度并大于-20度)
### 删除
* 注释打印语句(造成单片机卡死)
### 适用范围
所有
### 紧急程度
轻松


## V0.0.0.9
### 新增
* 消除编译告警
### 修改
无
### 删除
无
### 适用范围
所有
### 紧急程度
轻松




## V0.0.0.8
### 新增
* 消除编译告警
### 修改
无
### 删除
无
### 适用范围
所有
### 紧急程度
轻松





## V0.0.0.7
### 新增
* 增加sox输入输出函数
### 修改
无
### 删除
无
### 适用范围
所有
### 紧急程度
轻松



## V0.0.0.6
### 新增
* 增加输入输出中间层
### 修改
无
### 删除
无
### 适用范围
所有
### 紧急程度
轻松



## V0.0.0.5
### 新增
无
### 修改
* 修复编译告警
### 删除
无
### 适用范围
所有
### 紧急程度
轻松



## V0.0.0.4
### 新增
无
### 修改
* 修复编译告警
### 删除
无
### 适用范围
所有
### 紧急程度
轻松


## V0.0.0.3
### 新增
无
### 修改
* 修复soh初始化
### 删除
无
### 适用范围
所有
### 紧急程度
轻松


## V0.0.0.2
### 新增
* soe 使能判断功能
### 修改
无
### 删除
无
### 适用范围
所有
### 紧急程度
轻松



## V0.0.0.1
### 新增
* EKF SOC
### 修改
无
### 删除
无
### 适用范围
所有
### 紧急程度
轻松